 docker build -t focus-flow:v2 .
Sending build context to Docker daemon  1.399MB
Step 1/13 : FROM node:20-alpine AS builder
 ---> 7cdef5a33192
Step 2/13 : WORKDIR /app
 ---> Using cache
 ---> 273b2a1fc941
Step 3/13 : COPY package*.json ./
 ---> a3b949b1bde6
Step 4/13 : RUN npm install --legacy-peer-deps     && npm install @genkit-ai/firebase @opentelemetry/exporter-jaeger --save
 ---> Running in c33071bf3ebf

added 707 packages, and audited 708 packages in 24s

98 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
npm notice
npm notice New major version of npm available! 10.8.2 -> 11.5.2
npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.5.2
npm notice To update run: npm install -g npm@11.5.2
npm notice
npm warn deprecated node-domexception@1.0.0: Use your platform's native DOMException instead
npm warn deprecated @types/handlebars@4.1.0: This is a stub types definition. handlebars provides its own type definitions, so you do not need this installed.

added 185 packages, removed 4 packages, and audited 889 packages in 27s

111 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
Removing intermediate container c33071bf3ebf
 ---> fb363ea79502
Step 5/13 : COPY . .
 ---> 6ef26717ef3d
Step 6/13 : RUN npm run build
 ---> Running in 3ed401979d84

> nextn@0.1.0 build
> next build

Attention: Next.js now collects completely anonymous telemetry regarding usage.
This information is used to shape Next.js' roadmap and prioritize features.
You can learn more, including how to opt-out if you'd not like to participate in this anonymous program, by visiting the following URL:
https://nextjs.org/telemetry

   â–² Next.js 15.3.3

   Creating an optimized production build ...
Failed to compile.

./src/lib/prisma.ts
Module not found: Can't resolve '../generated/prisma'

https://nextjs.org/docs/messages/module-not-found

Import trace for requested module:
./src/pages/api/sessions.ts


> Build failed because of webpack errors
The command '/bin/sh -c npm run build' returned a non-zero code: 1
root@apps:/opt/focus# cat Dockerfile
# Use Node 20 for stability
FROM node:20-alpine AS builder

# Set working directory
WORKDIR /app

# Copy package files
COPY package*.json ./

# Install dependencies
RUN npm install --legacy-peer-deps \
    && npm install @genkit-ai/firebase @opentelemetry/exporter-jaeger --save

# Copy source code
COPY . .

# Build the Next.js app
RUN npm run build

# --- Runtime image ---
FROM node:20-alpine AS runner
WORKDIR /app

ENV NODE_ENV=production
ENV PORT=4000

# Copy built app from builder stage
COPY --from=builder /app ./

# Expose port 4000
EXPOSE 4000

# Start Next.js app